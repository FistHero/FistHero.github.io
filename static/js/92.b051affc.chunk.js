"use strict";(self.webpackChunkfisthero_ui=self.webpackChunkfisthero_ui||[]).push([[92],{9092:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(3032),s=n(3430),i=n(7186),a=n(4322),c=n.n(a),o=n(7313),l=n(9560),u=n(8552),x=n(6321),d=n(9466),m=n(7504),f=n(8805),h=n(1843),p=n(3559),b=n(874),g=n(513),v=n(8197),j=n(3690),w=n(9491),N=n(9624),y=n(3912),k=n(7998),Z=n(1114),F=n(6487),I=n(9751),T=n(6417);function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currency,n=e.value;return t?n?new I.x(t,n).format({suffix:" "+t.ticker}):"0 "+t.ticker:"-"}var A,B=function(e){return(0,T.jsx)(T.Fragment,{children:D(e.asset)})},S=n(9184),C=n(1361),P=n(8955),M=n(56),W=n(8489),_=n(508),O="opening",K="end",X=(0,Z.vg)("hero/nftbox_1.png"),E=(0,Z.vg)("hero/nftbox_2.png"),L=(0,Z.vg)("hero/nftbox_3.png"),$=function(e){return(0,T.jsx)(_.Z,(0,W.Z)((0,W.Z)({},e),{},{src:e.status===O?E:e.status===K?L:X,autoPlay:!0,isOneTime:e.status===K}))},R=n(3557),q=n(4412),z=n(1733),Y=n.n(z),G=n(2388),H=S.ZP.div(A||(A=(0,i.Z)(["\n  width: 40%;\n  input.ant-input::placeholder {\n    color: rgba(69, 73, 80, 0.81);\n  }\n\n  @media (max-width: 768px) {\n    width: 70%;\n  }\n"]))),J=function(){var e=(0,k.K)().account,t=(0,d.lr)(),n=(0,s.Z)(t,1)[0],i=(0,C.u)(),a=i.data,I=i.isLoading,A=(0,o.useState)(!1),S=(0,s.Z)(A,2),W=S[0],_=S[1],X=(0,o.useState)(""),E=(0,s.Z)(X,2),L=E[0],z=E[1],J=(0,o.useState)(!1),Q=(0,s.Z)(J,2),U=Q[0],V=Q[1],ee=(0,o.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],se=(0,M.useMutation)((0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Z.Kc)(a),(0,P.f)("open Box inviter",le),e.next=4,a.buyAndOpenBoxesWithInviter(Number(L),le);case 4:if(!(t=e.sent)){e.next=10;break}return V(!0),e.next=9,(0,Z.gk)(500);case 9:re(t.map((function(e){return e.toString()})));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)}))),{onError:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.Z.error({message:"open box failed",description:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ie=se.mutate,ae=se.isLoading,ce=(0,M.useMutation)((0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Z.Kc)(a),e.next=3,a.openBoxes(Number(L));case 3:if(!(t=e.sent)){e.next=9;break}return V(!0),e.next=8,(0,Z.gk)(500);case 8:re(t.map((function(e){return e.toString()})));case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),{onError:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.Z.error({message:"open box failed",description:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),oe=(ce.mutate,ce.isLoading),le=(0,o.useMemo)((function(){var e=n.get("inviter");return e&&u.isAddress(e)?e:""}),[n]);if(!e)return(0,T.jsx)("div",{className:"flex justify-center items-center mt-[20rem]",children:(0,T.jsx)(f.pB,{type:"primary"})});if(I||!a)return(0,T.jsx)(f.gb,{});var ue=function(e){return a&&e in a.config.NFTInfoMap?Y()((0,G.formatEther)(a.config.NFTInfoMap[e].hashPower)).format("0,0"):"-"},xe=function(e){return a&&e in a.config.NFTInfoMap?a.config.NFTInfoMap[e].name:"-"},de=function(e){return a&&e in a.config.NFTInfoMap?a.config.NFTInfoMap[e].rarity:"-"};return(0,T.jsxs)("div",{className:"px-4 container mx-auto",children:[(0,T.jsx)("div",{className:"h-32 flex justify-center mx-auto text-center bg-[url(/public/assets/hero/hero-title-bar.png)] bg-no-repeat bg-center bg-contain mt-6 text-2xl",children:(0,T.jsxs)("span",{className:"inline-block mt-16 text-[#FFDDA8] font-bold",children:[" ",(0,T.jsx)(R.xv,{tid:"hero-box"})," "]})}),a.config.sellingStartTime>0&&!a.isWithinSellingPeriod&&e&&(0,T.jsx)(f.IT,{targetDatetime:a.config.sellingStartTime}),(0,T.jsx)(v.Z,{justify:"center",className:"md:mt-4 mt-[1rem] h-100 flex justify-center items-center bg-[url(/public/assets/hero/bg-box.png)] bg-no-repeat bg-center bg-contain",children:(0,T.jsx)($,{status:U?K:ae||oe?O:"before",className:"block w-11/12 md:w-9/12 center"})}),(0,T.jsx)(v.Z,{gutter:16,justify:"center",className:"flex justify-center mt3 mt4-ns w-full",children:(0,T.jsx)("div",{className:"flex flex-wrap flex-nowrap-ns justify-center w-full mb-[20rem]",children:(0,T.jsxs)(H,{children:[(0,T.jsx)(j.Z,{className:"ba b--gray mr-2 mb-2 mt-2 h-10 text-1xl",disabled:ae||oe,value:L,onChange:function(e){return(/^[1-9]\d*$/.test(e.target.value)||""===e.target.value)&&z(e.target.value)},placeholder:"Boxes Count",suffix:(0,T.jsx)(w.Z,{size:"small",type:"link",onClick:function(){if((0,Z.Kc)(a),a.buyBoxTokenBalance){var e=a.buyBoxTokenBalance.div(a.config.purchasePrice.value);e.eq(x._Y)||(e.gt(l.O$.from(10))&&(e=l.O$.from(10)),z(e.toString()))}},children:"MAX"})}),(0,T.jsxs)(v.Z,{className:"w-full flex justify-between",children:[(0,T.jsx)(N.Z,{sm:12,md:12,lg:10,children:(0,T.jsxs)("div",{className:"text-[#FFDDA8] w-auto text-[0.7rem] md:text-[1rem]",children:[(0,T.jsx)(R.xv,{tid:"box-price"}),": ",D(a.config.purchasePrice)]})}),(0,T.jsx)(N.Z,{sm:12,md:12,lg:10,className:"",children:(0,T.jsxs)("div",{className:"text-[#FFDDA8] w-auto text-[0.7rem] md:text-[1rem] inline-block",children:[(0,T.jsx)(R.xv,{tid:"balance"}),": ",D({currency:F.AA,value:a.buyBoxTokenBalance})]})})]}),!a.isInWhitelist&&(0,T.jsx)("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),(0,T.jsxs)("div",{className:"mt-4 w-full flex items-center",children:[a.isInWhitelist?(0,T.jsxs)(m.X,{loading:ae||oe,className:"text-white bg-[url(/public/assets/hero/button-open-left.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs",type:"primary",onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.isWithinSellingPeriod){e.next=3;break}return h.Z.error({message:"not start "}),e.abrupt("return");case 3:ie();case 4:case"end":return e.stop()}}),e)}))),disabled:!a.buyBoxTokenBalance||!L||!a.isWithinSellingPeriod&&a.isApproved,children:[(ae||oe)&&(a.isApproved,"Opening..."),!ae&&!oe&&(a.isApproved,(0,T.jsx)(R.xv,{tid:"open-box"}))]}):(0,T.jsx)(m.X,{disabled:!a.buyBoxTokenBalance||!L,className:"text-white bg-[url(/public/assets/hero/button-open-left.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs",children:"Not Whitelist"}),(0,T.jsx)(m.X,{className:"bg-[url(/public/assets/hero/button-open-right.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs text-white",type:"primary",onClick:function(){return _(!0)},disabled:!0,children:(0,T.jsx)(R.xv,{tid:"invitation"})})]})]})})}),(0,T.jsxs)(y.Z,{style:{background:"#000"},visible:W,onCancel:function(){return _(!1)},footer:null,closable:!1,children:[function(){if(!a||!a.inviteesInfo)return(0,T.jsx)(p.ZP,{loading:!0});var e=a.inviteesInfo,t=e.reward,n=e.rewardClaimed,r=e.invitees,s=e.rewardsForInviter;if(!r)return(0,T.jsx)(p.ZP.Item,{children:(0,T.jsx)("div",{children:"No Invitees"})});for(var i=[],c=0;c<r.length;c++)i.push((0,T.jsxs)(p.ZP.Item,{children:[(0,T.jsx)(b.Z.Text,{className:"gray w-40",children:(0,T.jsx)(g.Z,{title:r[c],children:(0,Z.ro)(r[c])})}),(0,T.jsx)("div",{className:"text-[#FFDDA8] w-30",children:s[c].div(F.bf.mul(6)).toNumber()}),(0,T.jsx)("div",{className:"text-[#FFDDA8] w-30",children:(0,T.jsx)(B,{asset:{currency:F.lC,value:s[c]}})})]},c));return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(p.ZP,{children:[(0,T.jsxs)("div",{className:"bn",children:[(0,T.jsx)("span",{className:"gray w-77 mr2 fw8",children:"Total Reward"}),(0,T.jsxs)("span",{className:"text-[#FFDDA8] w-20 fw8",children:[" ",(0,T.jsx)(B,{asset:{currency:F.lC,value:t}})," "]})]}),(0,T.jsxs)("div",{className:"bn",children:[(0,T.jsx)("span",{className:"gray w-77 mr2 fw8",children:"Claimed"}),(0,T.jsxs)("span",{className:"text-[#FFDDA8] w-20 fw8",children:[" ",(0,T.jsx)(B,{asset:{currency:F.lC,value:n}})," "]})]}),(0,T.jsxs)(p.ZP.Item,{children:[(0,T.jsx)("div",{className:"gray w-40 fw8",children:"My Invitees"}),(0,T.jsx)("div",{className:"text-[#FFDDA8] w-30 fw8",children:"Bought Boxes"}),(0,T.jsx)("div",{className:"text-[#FFDDA8] w-30 fw8",children:"Invite Reward"})]}),i]})})}(),(0,T.jsx)("div",{className:"bb border-yellow-900 mt3 mb3"}),(0,T.jsx)(b.Z.Text,{copyable:{text:"https://fisthero.com/#/hero/box?inviter=".concat(e)},children:(0,T.jsx)(g.Z,{title:"invitation link",children:(0,Z.ro)("https://fisthero.com/#/hero/box?inviter=".concat(e),48)})}),(0,T.jsx)("div",{className:"mt3 mb3"})]}),(0,T.jsxs)(y.Z,{visible:U&&ne.length>0,maskStyle:{background:"rgba(0,0,0,.95)"},width:800,footer:null,closable:!1,children:[(0,T.jsx)(v.Z,{gutter:24,justify:"center",children:ne.map((function(e){return(0,T.jsx)(N.Z,{xs:12,sm:12,md:6,lg:6,className:"mb-4",children:(0,T.jsx)(q.F,{className:"w-[10.2rem] hover:cursor-pointer",NFTInfo:((0,P.f)("tokenIdStr",e,xe(e)),{name:xe(e),rarity:de(e),tokenId:e,hashPower:ue(e),attack:"-",isStaked:!1,isSelected:!1}),enableSelect:!1,toggleNFT:function(){}})},e)}))}),(0,T.jsx)(w.Z,{onClick:function(){V(!1),re([])},className:"center mw5 tc db shadow-3",block:!0,type:"primary",children:(0,T.jsx)(R.xv,{tid:"collect"})})]})]})}}}]);