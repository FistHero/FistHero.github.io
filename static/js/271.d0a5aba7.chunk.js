"use strict";(self.webpackChunkfisthero_ui=self.webpackChunkfisthero_ui||[]).push([[271],{1361:function(e,r,n){n.d(r,{t:function(){return x},u:function(){return d}});var t=n(3032),a=n(4322),u=n.n(a),s=n(334),c=n(7998),i=n(56),o=n(1114),p=n(658),f=n.n(p),v=n(8955),l=n(1843);function d(){var e=(0,s.I1)(),r=(0,c.K)().account,n=(0,i.useQueryClient)();return(0,i.useQuery)(["queryHero",{account:r}],(0,t.Z)(u().mark((function a(){var s,c,i,p,d,x,h,m,y,b,k,w,T,g,B,Z;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(0,o.Kc)(e),(0,o.Kc)(r),a.next=4,e.getConfig(r);case 4:return s=a.sent,(0,v.f)("hero config",s),c=s.NFTIds,i=s.purchaseTokenApproved,p=s.sellingStartTime,d=s.isInWhitelist,x=s.nativeBalance,h=s.buyBoxTokenBalance,m=s.heroMainTokenBalance,y=s.boxes,b=s.airdropBoxes,k=i,w=f()(),T=p>0&&w.isAfter(p),g=c,a.next=13,e.checkFHTApproved();case 13:return B=a.sent,a.next=16,e.getInviteesInfo(r);case 16:return Z=a.sent,a.abrupt("return",{config:s,isApproved:k,isWithinSellingPeriod:T,isInWhitelist:d,nftIds:g,nativeBalance:x,buyBoxTokenBalance:h,heroMainTokenBalance:m,boxes:y,airdropBoxes:b,DHTApproved:B,inviteesInfo:Z,approve:function(){var r=(0,t.Z)(u().mark((function r(){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t="",k){r.next=8;break}return r.next=4,e.approveToken();case 4:return t=r.sent,r.next=7,n.invalidateQueries("queryHero");case 7:l.Z.success({message:"Approve BUSD Succeed"});case 8:return r.abrupt("return",t);case 9:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),approveDHT:function(){var r=(0,t.Z)(u().mark((function r(){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.approveDHT();case 2:return t=r.sent,r.next=5,n.invalidateQueries("queryHero");case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),buyBoxesWithInviter:function(){var r=(0,t.Z)(u().mark((function r(t,a){var s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.buyBoxesWithInviter(t,a);case 2:return s=r.sent,r.next=5,n.invalidateQueries("queryHero");case 5:return r.abrupt("return",s);case 6:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),buyAndOpenBoxesWithInviter:function(){var r=(0,t.Z)(u().mark((function r(t,a){var s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(k){r.next=6;break}return r.next=3,e.approveToken();case 3:return r.next=5,n.invalidateQueries("queryHero");case 5:l.Z.success({message:"approve success"});case 6:if(T){r.next=11;break}return l.Z.error({message:"sell not start"}),r.abrupt("return",[]);case 11:return r.next=13,e.buyAndOpenBoxesWithInviter(t,a);case 13:return s=r.sent,r.next=16,n.invalidateQueries("queryHero");case 16:return r.abrupt("return",s);case 17:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),openBoxes:function(){var r=(0,t.Z)(u().mark((function r(t){var a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.openBoxes(t);case 2:return a=r.sent,r.next=5,n.invalidateQueries("queryHero");case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),mergeNFT:function(){var r=(0,t.Z)(u().mark((function r(t){var a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,v.f)(B),B){r.next=8;break}return l.Z.success({message:"start approve DHT"}),r.next=5,e.approveDHT();case 5:return r.next=7,n.invalidateQueries("queryHero");case 7:l.Z.success({message:"approve DHT succeed"});case 8:return r.next=10,e.mergeNFT(t);case 10:return a=r.sent,r.next=13,n.invalidateQueries("queryHero");case 13:return r.abrupt("return",a);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),generateAttack:function(){var r=(0,t.Z)(u().mark((function r(){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(0,v.f)("nftIds",g),r.next=3,e.generateAttack(g);case 3:return t=r.sent,r.next=6,n.invalidateQueries("queryHero");case 6:return r.abrupt("return",t);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()});case 18:case"end":return a.stop()}}),a)}))),{enabled:!!r&&!!e})}function x(){var e=(0,s.LM)(),r=(0,c.K)().account,n=(0,i.useQueryClient)();return(0,i.useQuery)(["queryWeapon",{account:r}],(0,t.Z)(u().mark((function a(){var s,c,i,p,d,x,h,m,y,b,k,w,T,g,B,Z;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(0,o.Kc)(e),(0,o.Kc)(r),a.next=4,e.getConfig(r);case 4:return s=a.sent,(0,v.f)("queryWeapon config",s),c=s.NFTIds,i=s.purchaseTokenApproved,p=s.sellingStartTime,d=s.isInWhitelist,x=s.nativeBalance,h=s.buyBoxTokenBalance,m=s.heroMainTokenBalance,y=s.boxes,b=s.airdropBoxes,k=i,w=f()(),T=p>0&&w.isAfter(p),g=c,a.next=13,e.checkFHTApproved();case 13:return B=a.sent,a.next=16,e.getInviteesInfo(r);case 16:return Z=a.sent,a.abrupt("return",{config:s,isApproved:k,isWithinSellingPeriod:T,isInWhitelist:d,nftIds:g,nativeBalance:x,buyBoxTokenBalance:h,heroMainTokenBalance:m,boxes:y,airdropBoxes:b,DHTApproved:B,inviteesInfo:Z,approve:function(){var r=(0,t.Z)(u().mark((function r(){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t="",k){r.next=8;break}return r.next=4,e.approveToken();case 4:return t=r.sent,r.next=7,n.invalidateQueries("queryWeapon");case 7:l.Z.success({message:"Approve BUSD Succeed"});case 8:return r.abrupt("return",t);case 9:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),approveDHT:function(){var r=(0,t.Z)(u().mark((function r(){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.approveDHT();case 2:return t=r.sent,r.next=5,n.invalidateQueries("queryWeapon");case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),buyBoxesWithInviter:function(){var r=(0,t.Z)(u().mark((function r(t,a){var s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.buyBoxesWithInviter(t,a);case 2:return s=r.sent,r.next=5,n.invalidateQueries("queryWeapon");case 5:return r.abrupt("return",s);case 6:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),buyAndOpenBoxesWithInviter:function(){var r=(0,t.Z)(u().mark((function r(t,a){var s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(k){r.next=6;break}return r.next=3,e.approveToken();case 3:return r.next=5,n.invalidateQueries("queryWeapon");case 5:l.Z.success({message:"approve success"});case 6:if(T){r.next=11;break}return l.Z.error({message:"sell not start"}),r.abrupt("return",[]);case 11:return r.next=13,e.buyAndOpenBoxesWithInviter(t,a);case 13:return s=r.sent,r.next=16,n.invalidateQueries("queryWeapon");case 16:return r.abrupt("return",s);case 17:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),openBoxes:function(){var r=(0,t.Z)(u().mark((function r(t){var a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.openBoxes(t);case 2:return a=r.sent,r.next=5,n.invalidateQueries("queryWeapon");case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),mergeNFT:function(){var r=(0,t.Z)(u().mark((function r(t){var a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,v.f)(B),B){r.next=8;break}return l.Z.success({message:"start approve DHT"}),r.next=5,e.approveDHT();case 5:return r.next=7,n.invalidateQueries("queryWeapon");case 7:l.Z.success({message:"approve DHT succeed"});case 8:return r.next=10,e.mergeNFT(t);case 10:return a=r.sent,r.next=13,n.invalidateQueries("queryWeapon");case 13:return r.abrupt("return",a);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),generateAttack:function(){var r=(0,t.Z)(u().mark((function r(){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(0,v.f)("nftIds",g),r.next=3,e.generateAttack(g);case 3:return t=r.sent,r.next=6,n.invalidateQueries("queryWeapon");case 6:return r.abrupt("return",t);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()});case 18:case"end":return a.stop()}}),a)}))),{enabled:!!r&&!!e})}},4967:function(e,r,n){n.d(r,{p:function(){return l}});var t=n(3032),a=n(4322),u=n.n(a),s=n(7998),c=n(56),i=n(1114),o=n(334),p=n(8955),f=n(9560),v=n(6749);function l(){var e=(0,o.FJ)(),r=(0,s.K)().account,n=(0,c.useQueryClient)();return(0,c.useQuery)(["queryNFTPool",{account:r}],(0,t.Z)(u().mark((function a(){var s,c,o,l,d,x,h,m;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(0,i.Kc)(e),(0,i.Kc)(r),(0,p.f)("before getFarmInfo"),a.next=5,e.getFarmInfo(r);case 5:return s=a.sent,(0,p.f)("getFarmInfo",s),a.next=9,e.getStakedNFTIds(r);case 9:return c=a.sent,(0,p.f)("stakedNFTs",c),o=1e8,l=s.userHashPower.mul(o).div(s.totalHashPower),d=s.rewardPerSecond.mul(3).div(1e3),x=f.O$.from(86400),h=d.mul(x).mul(l).div(o),m={historyReward:s.claimed.mul(3).div(1e3),oneDayReward:h,monthReward:h.mul(30),yearReward:h.mul(365)},(0,p.f)("rewardsMap",(0,v.formatEther)(m.historyReward),(0,v.formatEther)(m.oneDayReward)),a.abrupt("return",{farmInfo:s,stakedNFTs:c,rewardsMap:m,harvest:function(){var r=(0,t.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.harvest().then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),harvestUSDT:function(){var r=(0,t.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.harvestUSDT().then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),stakeNFT:function(){var r=(0,t.Z)(u().mark((function r(t){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.stakeNFT(t).then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),withdrawNFT:function(){var r=(0,t.Z)(u().mark((function r(t){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.withdrawNFT(t).then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()});case 19:case"end":return a.stop()}}),a)}))),{enabled:!!e&&!!r})}},4412:function(e,r,n){n.d(r,{F:function(){return o}});var t,a=n(7186),u=(n(7313),n(1114)),s=n(508),c=n(9184),i=n(6417),o=function(e){var r=e.className,n=e.NFTInfo,t=e.enableSelect,a=e.toggleNFT;if(!n)return(0,i.jsx)("div",{});var c=n.tokenId,o=n.rarity?n.rarity:"1";return(o<"1"||o>"3")&&(o="1"),(0,i.jsxs)(p,{className:"relative rounded-md  ".concat(n.isSelected?"shadow-xl ring-4 ring-red-800":""),onClick:function(){return t&&a(c)},children:[n.isBuilt&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black/70","aria-hidden":"true"}),t&&n.isSelected&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black/20","aria-hidden":"true"}),(0,i.jsx)(s.Z,{src:(0,u.vg)("cards/NFT_hero_".concat(n.name,"_").concat(o,".png")),autoPlay:!0,className:r}),(0,i.jsxs)("div",{className:"absolute bottom-[6%] left-[21%] w-[7rem] flex justify-between items-center text-[#FFDDA8] md:text-xs text-xs",children:[(0,i.jsx)("div",{className:"",children:n.hashPower}),(0,i.jsx)("div",{className:"absolute left-[37%]",children:n.attack}),(0,i.jsxs)("div",{className:"absolute right-[7%]",children:["#",c]})]}),(0,i.jsx)("img",{className:"absolute left-[40%] top-[43%] ".concat(n.isBuilt?"block":"hidden"),src:(0,u.vg)("mining/staked-status.png"),alt:"staked-status"})]})},p=c.ZP.div(t||(t=(0,a.Z)([""])))}}]);