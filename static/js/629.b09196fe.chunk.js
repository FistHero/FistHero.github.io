"use strict";(self.webpackChunkfisthero_ui=self.webpackChunkfisthero_ui||[]).push([[629],{1871:function(e,t,n){n.d(t,{R:function(){return a},n:function(){return i}});var r=n(9751),s=(n(7313),n(6417));function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currency,n=e.value;return t?n?new r.x(t,n).format({suffix:" "+t.ticker}):"0 "+t.ticker:"-"}var i=function(e){return(0,s.jsx)(s.Fragment,{children:a(e.asset)})}},1361:function(e,t,n){n.d(t,{u:function(){return p}});var r=n(3032),s=n(4322),a=n.n(s),i=n(5574),c=n(7998),o=n(56),u=n(1114),l=n(658),x=n.n(l),d=n(8955),f=n(1843);function p(){var e=(0,i.I1)(),t=(0,c.K)().account,n=(0,o.useQueryClient)();return(0,o.useQuery)(["queryHero",{account:t}],(0,r.Z)(a().mark((function s(){var i,c,o,l,p,m,v,h,b,g,j,w,y,N,k,Z;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return(0,u.Kc)(e),(0,u.Kc)(t),s.next=4,e.getConfig(t);case 4:return i=s.sent,(0,d.f)("hero config",i),c=i.NFTIds,o=i.purchaseTokenApproved,l=i.sellingStartTime,p=i.isInWhitelist,m=i.nativeBalance,v=i.buyBoxTokenBalance,h=i.heroMainTokenBalance,b=i.boxes,g=i.airdropBoxes,j=o,w=x()(),y=l>0&&w.isAfter(l),N=c,s.next=13,e.checkFHTApproved();case 13:return k=s.sent,s.next=16,e.getInviteesInfo(t);case 16:return Z=s.sent,s.abrupt("return",{config:i,isApproved:j,isWithinSellingPeriod:y,isInWhitelist:p,nftIds:N,nativeBalance:m,buyBoxTokenBalance:v,heroMainTokenBalance:h,boxes:b,airdropBoxes:g,DHTApproved:k,inviteesInfo:Z,approve:function(){var t=(0,r.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="",j){t.next=8;break}return t.next=4,e.approveToken();case 4:return r=t.sent,t.next=7,n.invalidateQueries("queryHero");case 7:f.Z.success({message:"Approve BUSD Succeed"});case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),approveDHT:function(){var t=(0,r.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.approveDHT();case 2:return r=t.sent,t.next=5,n.invalidateQueries("queryHero");case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),buyBoxesWithInviter:function(){var t=(0,r.Z)(a().mark((function t(r,s){var i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buyBoxesWithInviter(r,s);case 2:return i=t.sent,t.next=5,n.invalidateQueries("queryHero");case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),buyAndOpenBoxesWithInviter:function(){var t=(0,r.Z)(a().mark((function t(r,s){var i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j){t.next=6;break}return t.next=3,e.approveToken();case 3:return t.next=5,n.invalidateQueries("queryHero");case 5:f.Z.success({message:"approve success"});case 6:if(y){t.next=11;break}return f.Z.error({message:"sell not start"}),t.abrupt("return",[]);case 11:return t.next=13,e.buyAndOpenBoxesWithInviter(r,s);case 13:return i=t.sent,t.next=16,n.invalidateQueries("queryHero");case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),openBoxes:function(){var t=(0,r.Z)(a().mark((function t(r){var s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.openBoxes(r);case 2:return s=t.sent,t.next=5,n.invalidateQueries("queryHero");case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),mergeNFT:function(){var t=(0,r.Z)(a().mark((function t(r){var s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,d.f)(k),k){t.next=8;break}return f.Z.success({message:"start approve DHT"}),t.next=5,e.approveDHT();case 5:return t.next=7,n.invalidateQueries("queryHero");case 7:f.Z.success({message:"approve DHT succeed"});case 8:return t.next=10,e.mergeNFT(r);case 10:return s=t.sent,t.next=13,n.invalidateQueries("queryHero");case 13:return t.abrupt("return",s);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),generateAttack:function(){var t=(0,r.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,d.f)("nftIds",N),t.next=3,e.generateAttack(N);case 3:return r=t.sent,t.next=6,n.invalidateQueries("queryHero");case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 18:case"end":return s.stop()}}),s)}))),{enabled:!!t&&!!e})}},4412:function(e,t,n){n.d(t,{F:function(){return u}});var r,s=n(7186),a=(n(7313),n(1114)),i=n(508),c=n(9184),o=n(6417),u=function(e){var t=e.className,n=e.NFTInfo,r=e.enableSelect,s=e.toggleNFT;if(!n)return(0,o.jsx)("div",{});var c=n.tokenId,u=n.rarity?n.rarity:"1";return(u<"1"||u>"3")&&(u="1"),(0,o.jsxs)(l,{className:"relative rounded-md  ".concat(n.isSelected?"shadow-xl ring-4 ring-red-800":""),onClick:function(){return r&&s(c)},children:[n.isBuilt&&(0,o.jsx)("div",{className:"absolute inset-0 bg-black/70","aria-hidden":"true"}),r&&n.isSelected&&(0,o.jsx)("div",{className:"absolute inset-0 bg-black/20","aria-hidden":"true"}),(0,o.jsx)(i.Z,{src:(0,a.vg)("cards/NFT_hero_".concat(n.name,"_").concat(u,".png")),autoPlay:!0,className:t}),(0,o.jsxs)("div",{className:"absolute bottom-[6%] left-[21%] w-[7rem] flex justify-between items-center text-[#FFDDA8] md:text-xs text-xs",children:[(0,o.jsx)("div",{className:"",children:n.hashPower}),(0,o.jsx)("div",{className:"absolute left-[37%]",children:n.attack}),(0,o.jsxs)("div",{className:"absolute right-[7%]",children:["#",c]})]}),(0,o.jsx)("img",{className:"absolute left-[40%] top-[43%] ".concat(n.isBuilt?"block":"hidden"),src:(0,a.vg)("mining/staked-status.png"),alt:"staked-status"})]})},l=c.ZP.div(r||(r=(0,s.Z)([""])))},8629:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r,s=n(3032),a=n(3430),i=n(7186),c=n(4322),o=n.n(c),u=n(7313),l=(n(9560),n(8552)),x=(n(6321),n(9466)),d=n(7504),f=n(8805),p=n(1843),m=n(3559),v=n(874),h=n(513),b=n(8197),g=n(3690),j=n(9491),w=n(9624),y=n(3912),N=n(7998),k=n(1114),Z=n(6487),F=n(1871),I=n(9184),T=n(1361),B=n(8955),D=n(56),A=n(8489),S=n(508),C=n(6417),H="opening",M="end",P=(0,k.vg)("hero/nftbox_1.png"),W=(0,k.vg)("hero/nftbox_2.png"),Q=(0,k.vg)("hero/nftbox_3.png"),q=function(e){return(0,C.jsx)(S.Z,(0,A.Z)((0,A.Z)({},e),{},{src:e.status===H?W:e.status===M?Q:P,autoPlay:!0,isOneTime:e.status===M}))},_=n(3557),K=n(4412),O=n(1733),E=n.n(O),R=n(2388),X=I.ZP.div(r||(r=(0,i.Z)(["\n  width: 40%;\n  input.ant-input::placeholder {\n    color: rgba(69, 73, 80, 0.81);\n  }\n\n  @media (max-width: 768px) {\n    width: 70%;\n  }\n"]))),L=function(){var e=(0,N.K)().account,t=(0,x.lr)(),n=(0,a.Z)(t,1)[0],r=(0,T.u)(),i=r.data,c=r.isLoading,I=(0,u.useState)(!1),A=(0,a.Z)(I,2),S=A[0],P=A[1],W=(0,u.useState)(""),Q=(0,a.Z)(W,2),O=Q[0],L=Q[1],z=(0,u.useState)(!1),U=(0,a.Z)(z,2),$=U[0],G=U[1],J=(0,u.useState)([]),V=(0,a.Z)(J,2),Y=V[0],ee=V[1],te=(0,D.useMutation)((0,s.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.Kc)(i),(0,B.f)("open Box inviter",ie),e.next=4,i.buyAndOpenBoxesWithInviter(Number(O),ie);case 4:if(!(t=e.sent)){e.next=10;break}return G(!0),e.next=9,(0,k.gk)(500);case 9:ee(t.map((function(e){return e.toString()})));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)}))),{onError:function(){var e=(0,s.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.Z.error({message:"open box failed",description:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ne=(te.mutate,te.isLoading),re=(0,D.useMutation)((0,s.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.Kc)(i),e.next=3,i.openBoxes(Number(O));case 3:if(!(t=e.sent)){e.next=9;break}return G(!0),e.next=8,(0,k.gk)(500);case 8:ee(t.map((function(e){return e.toString()})));case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),{onError:function(){var e=(0,s.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.Z.error({message:"open box failed",description:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),se=re.mutate,ae=re.isLoading,ie=(0,u.useMemo)((function(){var e=n.get("inviter");return e&&l.isAddress(e)?e:""}),[n]);if(!e)return(0,C.jsx)("div",{className:"flex justify-center items-center mt-[20rem]",children:(0,C.jsx)(f.pB,{type:"primary"})});if(c||!i)return(0,C.jsx)(f.gb,{});var ce=function(e){return i&&e in i.config.NFTInfoMap?E()((0,R.formatEther)(i.config.NFTInfoMap[e].hashPower)).format("0,0"):"-"},oe=function(e){return i&&e in i.config.NFTInfoMap?E()((0,R.formatEther)(i.config.NFTInfoMap[e].attack)).format("0,0"):"-"},ue=function(e){return i&&e in i.config.NFTInfoMap?i.config.NFTInfoMap[e].name:"-"},le=function(e){return i&&e in i.config.NFTInfoMap?i.config.NFTInfoMap[e].rarity:"-"};return(0,C.jsxs)("div",{className:"px-4 container mx-auto",children:[(0,C.jsx)("div",{className:"h-32 flex justify-center mx-auto text-center bg-[url(/public/assets/hero/hero-title-bar.png)] bg-no-repeat bg-center bg-contain mt-6 text-2xl",children:(0,C.jsxs)("span",{className:"inline-block mt-16 text-[#FFDDA8] font-bold",children:[" ",(0,C.jsx)(_.xv,{tid:"hero-box"})," "]})}),i.config.sellingStartTime>0&&!i.isWithinSellingPeriod&&e&&(0,C.jsx)(f.IT,{targetDatetime:i.config.sellingStartTime}),(0,C.jsx)(b.Z,{justify:"center",className:"md:mt-4 mt-[1rem] h-100 flex justify-center items-center bg-[url(/public/assets/hero/bg-box.png)] bg-no-repeat bg-center bg-contain",children:(0,C.jsx)(q,{status:$?M:ne||ae?H:"before",className:"block w-11/12 md:w-9/12 center"})}),(0,C.jsx)(b.Z,{gutter:16,justify:"center",className:"flex justify-center mt3 mt4-ns w-full",children:(0,C.jsx)("div",{className:"flex flex-wrap flex-nowrap-ns justify-center w-full mb-[20rem]",children:(0,C.jsxs)(X,{children:[(0,C.jsx)(g.Z,{className:"ba b--gray mr-2 mb-2 mt-2 h-10 text-1xl",disabled:ne||ae,value:O,onChange:function(e){return(/^[1-9]\d*$/.test(e.target.value)||""===e.target.value)&&L(e.target.value)},placeholder:"Boxes Count",suffix:(0,C.jsx)(j.Z,{size:"small",type:"link",onClick:function(){(0,k.Kc)(i);var e=i.config.boxes;e>10&&(e=10),L(e.toString())},children:"MAX"})}),(0,C.jsxs)(b.Z,{className:"w-full flex justify-between",children:[(0,C.jsx)(w.Z,{sm:12,md:12,lg:10,children:(0,C.jsxs)("div",{className:"text-[#FFDDA8] w-auto text-[0.7rem] md:text-[1rem]",children:[(0,C.jsx)(_.xv,{tid:"box-price"}),": ",(0,F.R)(i.config.purchasePrice)]})}),(0,C.jsx)(w.Z,{sm:12,md:12,lg:10,className:"",children:(0,C.jsxs)("div",{className:"text-[#FFDDA8] w-auto text-[0.7rem] md:text-[1rem] inline-block",children:[(0,C.jsx)(_.xv,{tid:"boxes"}),": "+i.config.boxes]})})]}),!i.isInWhitelist&&(0,C.jsx)("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),(0,C.jsxs)("div",{className:"mt-4 w-full flex items-center",children:[i.isInWhitelist?(0,C.jsxs)(d.X,{loading:ne||ae,className:"text-white bg-[url(/public/assets/hero/button-open-left.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs",type:"primary",onClick:(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se();case 1:case"end":return e.stop()}}),e)}))),children:[(ne||ae)&&(i.isApproved,"Opening..."),!ne&&!ae&&(i.isApproved,(0,C.jsx)(_.xv,{tid:"open-box"}))]}):(0,C.jsx)(d.X,{disabled:!i.buyBoxTokenBalance||!O,className:"text-white bg-[url(/public/assets/hero/button-open-left.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs",children:"Not Whitelist"}),(0,C.jsx)(d.X,{className:"bg-[url(/public/assets/hero/button-open-right.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs text-white",type:"primary",onClick:function(){return P(!0)},disabled:!0,children:(0,C.jsx)(_.xv,{tid:"invitation"})})]})]})})}),(0,C.jsxs)(y.Z,{style:{background:"#000"},visible:S,onCancel:function(){return P(!1)},footer:null,closable:!1,children:[function(){if(!i||!i.inviteesInfo)return(0,C.jsx)(m.ZP,{loading:!0});var e=i.inviteesInfo,t=e.reward,n=e.rewardClaimed,r=e.invitees,s=e.rewardsForInviter;if(!r)return(0,C.jsx)(m.ZP.Item,{children:(0,C.jsx)("div",{children:"No Invitees"})});for(var a=[],c=0;c<r.length;c++)a.push((0,C.jsxs)(m.ZP.Item,{children:[(0,C.jsx)(v.Z.Text,{className:"gray w-40",children:(0,C.jsx)(h.Z,{title:r[c],children:(0,k.ro)(r[c])})}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30",children:s[c].div(Z.bf.mul(6)).toNumber()}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30",children:(0,C.jsx)(F.n,{asset:{currency:Z.lC,value:s[c]}})})]},c));return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(m.ZP,{children:[(0,C.jsxs)("div",{className:"bn",children:[(0,C.jsx)("span",{className:"gray w-77 mr2 fw8",children:"Total Reward"}),(0,C.jsxs)("span",{className:"text-[#FFDDA8] w-20 fw8",children:[" ",(0,C.jsx)(F.n,{asset:{currency:Z.lC,value:t}})," "]})]}),(0,C.jsxs)("div",{className:"bn",children:[(0,C.jsx)("span",{className:"gray w-77 mr2 fw8",children:"Claimed"}),(0,C.jsxs)("span",{className:"text-[#FFDDA8] w-20 fw8",children:[" ",(0,C.jsx)(F.n,{asset:{currency:Z.lC,value:n}})," "]})]}),(0,C.jsxs)(m.ZP.Item,{children:[(0,C.jsx)("div",{className:"gray w-40 fw8",children:"My Invitees"}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30 fw8",children:"Bought Boxes"}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30 fw8",children:"Invite Reward"})]}),a]})})}(),(0,C.jsx)("div",{className:"bb border-yellow-900 mt3 mb3"}),(0,C.jsx)(v.Z.Text,{copyable:{text:"https://fisthero.com/#/hero/box?inviter=".concat(e)},children:(0,C.jsx)(h.Z,{title:"invitation link",children:(0,k.ro)("https://fisthero.com/#/hero/box?inviter=".concat(e),48)})}),(0,C.jsx)("div",{className:"mt3 mb3"})]}),(0,C.jsxs)(y.Z,{visible:$&&Y.length>0,maskStyle:{background:"rgba(0,0,0,.95)"},width:800,footer:null,closable:!1,children:[(0,C.jsx)(b.Z,{gutter:24,justify:"center",children:Y.map((function(e){return(0,C.jsx)(w.Z,{xs:12,sm:12,md:6,lg:6,className:"mb-4",children:(0,C.jsx)(K.F,{className:"w-[10.2rem] hover:cursor-pointer",NFTInfo:((0,B.f)("tokenIdStr",e,ue(e)),{name:ue(e),rarity:le(e),tokenId:e,hashPower:ce(e),attack:oe(e),isStaked:!1,isSelected:!1}),enableSelect:!1,toggleNFT:function(){}})},e)}))}),(0,C.jsx)(j.Z,{onClick:function(){G(!1),ee([])},className:"center mw5 tc db shadow-3",block:!0,type:"primary",children:(0,C.jsx)(_.xv,{tid:"collect"})})]})]})}}}]);