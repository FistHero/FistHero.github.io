"use strict";(self.webpackChunkfisthero_ui=self.webpackChunkfisthero_ui||[]).push([[834],{3834:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var s=n(3430),r=n(7313),i=n(8197),a=n(9624),c=n(7998),l=n(1114),o=n(3557),d=n(3032),m=n(4322),u=n.n(m),x=n(56),f=n(4064),g=n(8955);function b(){var e=(0,f.F)(),t=(0,c.K)().account,n=(0,x.useQueryClient)();return(0,x.useQuery)(["queryNFTPool",{account:t}],(0,d.Z)(u().mark((function s(){var r,i;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return(0,l.Kc)(e),(0,l.Kc)(t),(0,g.f)("before getFarmInfo"),s.next=5,e.getFarmInfo(t);case 5:return r=s.sent,(0,g.f)("getFarmInfo",r),s.next=9,e.getStakedNFTIds(t);case 9:return i=s.sent,(0,g.f)("stakedNFTs",i),s.abrupt("return",{farmInfo:r,stakedNFTs:i,harvest:function(){var t=(0,d.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.harvest().then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),stakeNFT:function(){var t=(0,d.Z)(u().mark((function t(s){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.stakeNFT(s).then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),withdrawNFT:function(){var t=(0,d.Z)(u().mark((function t(s){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.withdrawNFT(s).then((function(e){return n.invalidateQueries("queryNFTPool"),e})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 12:case"end":return s.stop()}}),s)}))),{enabled:!!e&&!!t})}var h,p,j=n(7186),v=n(5531),N=n(5035),w=n(1843),F=n(9184),k=n(1361),D=n(3122),y=n(1733),Z=n.n(y),T=n(2388),S=n(6417),I=function(e){var t=e.isOpen,n=e.setIsOpen,d=((0,c.K)().account,b()),m=d.data,u=(d.isLoading,(0,k.u)()),f=u.data,h=(u.isLoading,(0,r.useState)([])),p=(0,s.Z)(h,2),j=p[0],F=p[1],y=f&&m?f.nftIds.filter((function(e){return!m.stakedNFTs.includes(e)})):[],I=(0,x.useMutation)((function(){return(0,l.Kc)(m),j||w.Z.info({message:"No Selected Hero"}),m.stakeNFT(j)}),{onSuccess:function(){w.Z.success({message:"Stake Succeed"}),F([])},onError:function(e){var t;return w.Z.error({message:"Stake Failed",description:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message})}}),C=I.mutateAsync,E=I.isLoading,H=(0,x.useMutation)((function(){return(0,l.Kc)(m),j||w.Z.error({message:"No Selected Hero"}),m.withdrawNFT(j)}),{onSuccess:function(){w.Z.success({message:"Withdraw Succeed"}),F([])},onError:function(e){var t;return w.Z.error({message:"Withdraw Failed",description:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message})}}),P=H.mutateAsync,K=H.isLoading;return m?(0,S.jsxs)(N.V,{open:t,onClose:function(){return n(!1)},className:"gaming relative z-50",children:[(0,S.jsx)("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(N.V.Panel,{className:"mx-auto ",children:(0,S.jsxs)(i.Z,{gutter:30,className:"flex justify-center items-center",children:[(0,S.jsxs)(a.Z,{xs:24,sm:24,md:24,lg:12,className:"px-6 py-7 relative w-[38rem] h-[38rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/bg-select-hero.png)] bg-contain bg-center bg-no-repeat",children:[(0,S.jsx)(N.V.Title,{className:"absolute top-[5%] text-3xl text-[#28170B] font-extrabold\tstroke-current",children:"Hero Collection"}),(0,S.jsx)(i.Z,{gutter:10,justify:"start",className:"flex relative top-[1.5rem] h-[29rem] w-[32rem]",children:y.concat(m.stakedNFTs).map((function(e){return(0,S.jsx)(a.Z,{xs:12,sm:12,md:8,lg:8,className:"flex justify-center items-center h-[3rem]]",children:(0,S.jsxs)(A,{className:"".concat(m&&m.stakedNFTs.includes(e)&&"bg-black/60"),children:[(0,S.jsx)("img",{src:(0,l.vg)("nft/NFT-".concat(parseInt(e)%9+1,".png")),alt:"",className:"\n                          db center h-[14rem] mb-3 \n                          ".concat(j.includes(e)&&"selected"," \n                        "),onClick:function(){return F((function(t){if(t.includes(e)){var n=(0,v.Z)(t);return(0,g.f)(n.filter((function(t){return t!==e}))),n.filter((function(t){return t!==e}))}return(0,g.f)([].concat((0,v.Z)(t),[e])),[].concat((0,v.Z)(t),[e])}))}}),(0,S.jsx)("img",{className:"\n                         \n                         absolute left-[40%] top-[43%]\n                         ".concat(m&&m.stakedNFTs.includes(e)?"block":"hidden","\n                      "),src:(0,l.vg)("mining/staked-status.png"),alt:"staked-status"})]})},e)}))})]}),(0,S.jsxs)(a.Z,{xs:24,sm:24,md:12,lg:12,className:"relative w-[38rem] h-[38rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/bg-staking.png)] bg-contain bg-center bg-no-repeat",children:[(0,S.jsx)(N.V.Title,{className:"absolute top-[6.5%] text-3xl text-[#28170B] font-extrabold\tstroke-current shadow-red drop-shadow-lg",children:"Mining Center"}),(0,S.jsxs)("div",{className:"w-7/12 mt-10 flex flex-col justify-center items-center",children:[(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"total-power"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",Z()((0,T.formatEther)(m.farmInfo.totalHashPower)).format("0,0")," "]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"my-power"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",Z()((0,T.formatEther)(m.farmInfo.userHashPower)).format("0,0"),"  "]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"my-power-rate"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",m.farmInfo.totalHashPower.gt(0)?Z()(m.farmInfo.userHashPower.mul(1e8).div(m.farmInfo.totalHashPower).toNumber()/1e8).format("0.000000 %"):"0%"," "]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"staked-count"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",m.farmInfo.totalStakedNFTCount.toString()," "]})]}),(0,S.jsxs)("div",{className:"text-xl text-[#FFDDA8] font-extrabold w-[20rem] h-[4.3rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/button-pink.png)] bg-contain bg-center bg-no-repeat cursor-pointer",onClick:function(){return C()},children:[E&&(0,S.jsx)(D.fCD,{className:"animate-spin inline-block mx-auto"}),!E&&(0,S.jsx)(o.xv,{tid:"stake"})]}),(0,S.jsxs)("div",{className:"text-xl text-[#FFDDA8] font-extrabold\t w-[18rem] h-[4.3rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/button-gray.png)] bg-contain bg-center bg-no-repeat cursor-pointer",onClick:function(){return P()},children:[K&&(0,S.jsx)(D.fCD,{className:"animate-spin inline-block mx-auto"}),!K&&(0,S.jsx)(o.xv,{tid:"withdraw"})]})]})]})]})})})]}):null},A=F.ZP.div(h||(h=(0,j.Z)(["\n  position: relative;\n  \n  .selected {\n    box-shadow: 4px 4px 4px 4px #ffdda8;\n  }\n"]))),C=function(e){var t=e.isOpen,n=e.setIsOpen,d=((0,c.K)().account,b()),m=d.data,u=(d.isLoading,(0,k.u)()),f=u.data,g=(u.isLoading,(0,r.useState)([])),h=(0,s.Z)(g,2),p=h[0],j=h[1],v=(f&&m&&f.nftIds.filter((function(e){return!m.stakedNFTs.includes(e)})),(0,x.useMutation)((function(){return(0,l.Kc)(m),p||w.Z.info({message:"No Selected Hero"}),m.stakeNFT(p)}),{onSuccess:function(){w.Z.success({message:"Stake Succeed"}),j([])},onError:function(e){var t;return w.Z.error({message:"Stake Failed",description:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message})}})),F=v.mutateAsync,y=v.isLoading,I=(0,x.useMutation)((function(){return(0,l.Kc)(m),p||w.Z.error({message:"No Selected Hero"}),m.withdrawNFT(p)}),{onSuccess:function(){w.Z.success({message:"Withdraw Succeed"}),j([])},onError:function(e){var t;return w.Z.error({message:"Withdraw Failed",description:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message})}}),A=I.mutateAsync,C=I.isLoading;return m?(0,S.jsxs)(N.V,{open:t,onClose:function(){return n(!1)},className:"gaming relative z-50",children:[(0,S.jsx)("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),(0,S.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,S.jsx)(N.V.Panel,{className:"mx-auto ",children:(0,S.jsxs)("div",{className:"relative w-[38rem] h-[38rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/bg-staking.png)] bg-contain bg-center bg-no-repeat",children:[(0,S.jsx)(N.V.Title,{className:"absolute top-[6.5%] text-3xl text-[#28170B] font-extrabold\tstroke-current shadow-red drop-shadow-lg",children:(0,S.jsx)(o.xv,{tid:"Reward"})}),(0,S.jsxs)("div",{className:"w-7/12 mt-2 flex flex-col justify-center items-center",children:[(0,S.jsxs)(i.Z,{gutter:10,className:"flex justify-center items-center mb-4",children:[(0,S.jsxs)(a.Z,{xs:8,sm:8,md:8,lg:8,className:"flex flex-col justify-center items-center",children:[(0,S.jsx)("img",{className:"w-[5rem] block",src:(0,l.vg)("mining/FHT.png"),alt:"FHT"}),(0,S.jsx)("div",{children:Z()((0,T.formatEther)(m.farmInfo.claimable)).format("0,0")})]}),(0,S.jsx)(a.Z,{xs:8,sm:8,md:8,lg:8,className:"flex flex-col justify-center items-center text-3xl text-[#FFDDA8]",children:(0,S.jsx)(o.xv,{tid:"or"})}),(0,S.jsxs)(a.Z,{xs:8,sm:8,md:8,lg:8,className:"flex flex-col justify-center items-center",children:[(0,S.jsx)("img",{className:"w-[4.3rem] block",src:(0,l.vg)("mining/USDT.png"),alt:"USDT"}),(0,S.jsx)("div",{children:Z()((0,T.formatEther)(m.farmInfo.claimable.mul(3).div(1e3))).format("0,0")})]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"total-power"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",Z()((0,T.formatEther)(m.farmInfo.totalHashPower)).format("0,0")," "]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"my-power"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",Z()((0,T.formatEther)(m.farmInfo.userHashPower)).format("0,0"),"  "]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"my-power-rate"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",m.farmInfo.totalHashPower.gt(0)?Z()(m.farmInfo.userHashPower.mul(1e8).div(m.farmInfo.totalHashPower).toNumber()/1e8).format("0.000000 %"):"0%"," "]})]}),(0,S.jsxs)("div",{className:"px-3 mb-2 w-[25rem] h-[3rem]  flex justify-between items-center bg-[#FFDDA8] text-[#68452D] rounded-lg border-current border-2",children:[(0,S.jsx)("div",{className:"text-2xl text-[#68452D]",children:(0,S.jsx)(o.xv,{tid:"staked-count"})}),(0,S.jsxs)("div",{className:"text-[#FF2E00]",children:[" ",m.farmInfo.totalStakedNFTCount.toString()," "]})]}),(0,S.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,S.jsxs)("div",{className:"text-xl text-[#FFDDA8] font-extrabold w-[12rem] h-[4.3rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/button-claim-1.png)] bg-contain bg-center bg-no-repeat cursor-pointer",onClick:function(){return F()},children:[y&&(0,S.jsx)(D.fCD,{className:"animate-spin inline-block mx-auto"}),!y&&(0,S.jsx)(o.xv,{tid:"claim-FHT"})]}),(0,S.jsxs)("div",{className:"text-xl text-center  text-[#FFDDA8] font-extrabold\t w-[12rem] h-[4.3rem] flex flex-col justify-center items-center  bg-[url(/public/assets/mining/button-claim-2.png)] bg-contain bg-center bg-no-repeat cursor-pointer",onClick:function(){return A()},children:[C&&(0,S.jsx)(D.fCD,{className:"animate-spin inline-block mx-auto"}),!C&&(0,S.jsx)(o.xv,{tid:"claim-USDT"})]})]})]})]})})})]}):null},E=(F.ZP.div(p||(p=(0,j.Z)(["\n  position: relative;\n  \n  .selected {\n    box-shadow: 4px 4px 4px 4px #ffdda8;\n  }\n"]))),function(){(0,c.K)().account;var e=b(),t=(e.data,e.isLoading,(0,r.useState)(!1)),n=(0,s.Z)(t,2),d=n[0],m=n[1],u=(0,r.useState)(!1),x=(0,s.Z)(u,2),f=x[0],g=x[1];return(0,S.jsxs)("div",{className:"px-4 container mx-auto",children:[(0,S.jsx)("div",{className:"h-32 flex justify-center mx-auto text-center bg-[url(/public/assets/mining/title-mining.png)] bg-no-repeat bg-center bg-contain mt-6 ",children:(0,S.jsx)("span",{className:"inline-block mt-16 text-[#FFDDA8] font-bold md:text-2xl text-xl",children:(0,S.jsx)(o.xv,{tid:"mining"})})}),(0,S.jsx)("div",{className:"mx-auto w-[20rem] h-[15rem] md:w-[80rem] md:h-[60rem] md:mt-[-1rem] md:bg-[url(/public/assets/mining/bg-mining.png)] md:bg-center md:bg-contain md:bg-no-repeat",children:(0,S.jsx)(i.Z,{gutter:20,className:"flex justify-start-ns justify-center items-center",children:(0,S.jsxs)(a.Z,{xs:24,sm:24,md:8,lg:8,className:"md:mt-[7rem] md:ml-[2rem] w-[16rem] h-[26rem] bg-[url(/public/assets/mining/mining-card.png)] bg-no-repeat bg-center bg-contain",children:[(0,S.jsx)("div",{className:"relative top-[1.1rem] mx-auto text-center text-[#FFDDA8] text-md",children:(0,S.jsx)(o.xv,{tid:"nft-mining"})}),(0,S.jsxs)("div",{className:"absolute top-[32%] left-[45%] mx-auto w-[32%] h-[37%] flex flex-col justify-between items-center",children:[(0,S.jsxs)("div",{className:"text-[#FFDDA8] w-full text-center",children:[(0,S.jsx)(o.xv,{tid:"nft-staking-content"})," "]}),(0,S.jsxs)("div",{className:"w-full text-center",children:[(0,S.jsx)("img",{className:"inline-block w-auto h-[2.3rem]",src:(0,l.vg)("mining/hero-power.png"),alt:"button-yellow"}),(0,S.jsx)(o.xv,{tid:"mock-power"})]}),(0,S.jsxs)("div",{className:"w-full text-center",children:[(0,S.jsx)("img",{className:"inline-block w-auto h-[1.6rem] mr-[0.2rem]",src:(0,l.vg)("mining/coin.png"),alt:"button-yellow"}),(0,S.jsx)(o.xv,{tid:"mock-balance"})]}),(0,S.jsx)("div",{className:"mx-auto w-[70%] h-[2.3rem] leading-8 text-[1rem] text-[#FFDDA8] bg-[url(/public/assets/mining/button-yellow.png)] bg-center bg-contain text-center cursor-pointer",onClick:function(){return g(!0)},children:(0,S.jsx)(o.xv,{tid:"harvest"})})]}),(0,S.jsxs)("div",{className:"absolute bottom-[15%] left-[24%] flex justify-center items-center w-6/12 mx-auto",children:[(0,S.jsx)("div",{className:"mx-auto w-[50%] h-[2.3rem] leading-8 text-[1rem] text-[#FFDDA8] bg-[url(/public/assets/mining/button-green.png)] bg-center bg-contain text-center cursor-pointer",onClick:function(){return m(!0)},children:(0,S.jsx)(o.xv,{tid:"stake"})}),(0,S.jsx)("div",{className:"drop-shadow-lg shadow-red mx-auto w-[50%] h-[2.3rem] leading-8 text-[1rem] text-[#FFDDA8] bg-[url(/public/assets/mining/button-red.png)] bg-center bg-contain text-center cursor-pointer",children:(0,S.jsx)(o.xv,{className:"drop-shadow-lg shadow-xl shadow-red",tid:"withdraw"})})]})]})})}),(0,S.jsx)(I,{isOpen:d,setIsOpen:m}),(0,S.jsx)(C,{isOpen:f,setIsOpen:g})]})})}}]);