"use strict";(self.webpackChunkfisthero_ui=self.webpackChunkfisthero_ui||[]).push([[92],{9092:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var s=n(3032),r=n(3430),i=n(7186),a=n(4322),c=n.n(a),l=n(7313),o=n(9560),x=n(8552),u=n(6321),d=n(9466),m=n(7890),h=n(7504),f=n(8805),b=n(1843),g=n(7575),p=n(874),v=n(513),j=n(8197),w=n(3690),y=n(9491),N=n(9624),Z=n(3912),k=n(7998),F=n(1114),D=n(6487),B=n(9751),C=n(6417);function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currency,n=e.value;return t?n?new B.x(t,n).format({suffix:" "+t.ticker}):"0 "+t.ticker:"-"}var I,T=function(e){return(0,C.jsx)(C.Fragment,{children:A(e.asset)})},P=n(9184),S=n(1361),O=n(8955),_=n(56),L=n(8489),W=n(508),M="opening",X="end",K=(0,F.vg)("hero/nftbox_1.png"),$=(0,F.vg)("hero/nftbox_2.png"),z=(0,F.vg)("hero/nftbox_3.png"),E=function(e){return(0,C.jsx)(W.Z,(0,L.Z)((0,L.Z)({},e),{},{src:e.status===M?$:e.status===X?z:K,autoPlay:!0,isOneTime:e.status===X}))},R=n(3557),q=P.ZP.div(I||(I=(0,i.Z)(["\n  width: 40%;\n  input.ant-input::placeholder {\n    color: rgba(69, 73, 80, 0.81);\n  }\n\n  @media (max-width: 768px) {\n    width: 70%;\n  }\n"]))),Y=function(){var e=(0,k.K)().account,t=(0,d.lr)(),n=(0,r.Z)(t,1)[0],i=(0,S.u)(),a=i.data,B=i.isLoading,I=(0,l.useState)(!1),P=(0,r.Z)(I,2),L=P[0],K=P[1],$=(0,l.useState)(""),z=(0,r.Z)($,2),Y=z[0],G=z[1],H=(0,l.useState)(!1),J=(0,r.Z)(H,2),Q=J[0],U=J[1],V=(0,l.useState)([]),ee=(0,r.Z)(V,2),te=ee[0],ne=ee[1],se=((0,m.s0)(),(0,_.useMutation)((0,s.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,F.Kc)(a),(0,O.f)("open Box inviter",ae),e.next=4,a.buyAndOpenBoxesWithInviter(Number(Y),ae);case 4:return t=e.sent,U(!0),e.next=8,(0,F.gk)(500);case 8:return ne(t),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),{onError:function(){var e=(0,s.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.Z.error({message:"open box failed",description:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),re=se.mutate,ie=se.isLoading,ae=(0,l.useMemo)((function(){var e=n.get("inviter");return e&&x.isAddress(e)?e:""}),[n]);if(!e)return(0,C.jsx)("div",{className:"flex justify-center items-center mt-[20rem]",children:(0,C.jsx)(f.pB,{type:"primary"})});if(B||!a)return(0,C.jsx)("div",{className:"h-screen flex justify-center bg-[#28170B] items-center text-white py-20",children:(0,C.jsx)(W.Z,{className:"block absolute top-[25%] z-10 md:w-[30rem] w-[20rem] object-center",autoPlay:!0,src:(0,F.vg)("loading.png"),alt:"Loading"})});return(0,C.jsxs)("div",{className:"px-4 container mx-auto",children:[(0,C.jsx)("div",{className:"h-32 flex justify-center mx-auto text-center bg-[url(/public/assets/hero/hero-title-bar.png)] bg-no-repeat bg-center bg-contain mt-6 text-2xl",children:(0,C.jsxs)("span",{className:"inline-block mt-16 text-[#FFDDA8] font-bold",children:[" ",(0,C.jsx)(R.xv,{tid:"hero-box"})," "]})}),(0,C.jsx)(j.Z,{justify:"center",className:"md:mt-4 mt-[1rem] h-100 flex justify-center items-center bg-[url(/public/assets/hero/bg-box.png)] bg-no-repeat bg-center bg-contain",children:(0,C.jsx)(E,{status:Q?X:ie?M:"before",className:"block w-11/12 md:w-9/12 center"})}),(0,C.jsx)(j.Z,{gutter:16,justify:"center",className:"flex justify-center mt3 mt4-ns w-full",children:(0,C.jsx)("div",{className:"flex flex-wrap flex-nowrap-ns justify-center w-full mb-[20rem]",children:(0,C.jsxs)(q,{children:[(0,C.jsx)(w.Z,{className:"ba b--gray mr-2 mb-2 mt-2 h-10 text-1xl",disabled:ie,value:Y,onChange:function(e){return(/^[1-9]\d*$/.test(e.target.value)||""===e.target.value)&&G(e.target.value)},placeholder:"Boxes Count",suffix:(0,C.jsx)(y.Z,{size:"small",type:"link",onClick:function(){if((0,F.Kc)(a),a.buyBoxTokenBalance){var e=a.buyBoxTokenBalance.div(a.config.purchasePrice.value);e.eq(u._Y)||(e.gt(o.O$.from(3))&&(e=o.O$.from(3)),G(e.toString()))}},children:"MAX"})}),(0,C.jsxs)(j.Z,{className:"w-full flex justify-between",children:[(0,C.jsx)(N.Z,{sm:12,md:12,lg:10,children:(0,C.jsxs)("div",{className:"text-[#FFDDA8] w-auto text-[0.7rem] md:text-[1rem]",children:[(0,C.jsx)(R.xv,{tid:"box-price"}),": ",A(a.config.purchasePrice)]})}),(0,C.jsx)(N.Z,{sm:12,md:12,lg:10,children:(0,C.jsxs)("div",{className:"text-[#FFDDA8] w-auto text-[0.7rem] md:text-[1rem]",children:[(0,C.jsx)(R.xv,{tid:"balance"}),": ",A({currency:D.lC,value:a.buyBoxTokenBalance})]})})]}),!a.isInWhitelist&&(0,C.jsx)("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),(0,C.jsxs)("div",{className:"mt-4 w-full flex items-center",children:[a.isInWhitelist?(0,C.jsxs)(h.X,{loading:ie,className:"text-white bg-[url(/public/assets/hero/button-open-left.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs",type:"primary",onClick:(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re();case 1:case"end":return e.stop()}}),e)}))),disabled:!a.buyBoxTokenBalance||!Y,children:[ie&&(a.isApproved?"Opening...":"Approving..."),!ie&&(0,C.jsx)(R.xv,{tid:"open-box"})]}):(0,C.jsx)(h.X,{disabled:!a.buyBoxTokenBalance||!Y,className:"text-white bg-[url(/public/assets/hero/button-open-left.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs",children:"Not Whitelist"}),(0,C.jsx)(h.X,{className:"bg-[url(/public/assets/hero/button-open-right.png)] bg-contain bg-no-repeat bg-center px-4 py-4 w-6/12 md:text-2xl text-xs text-white",type:"primary",onClick:function(){return K(!0)},children:(0,C.jsx)(R.xv,{tid:"invitation"})})]})]})})}),a.config.sellingStartTime>0&&!a.isWithinSellingPeriod&&e&&(0,C.jsx)(f.IT,{targetDatetime:a.config.sellingStartTime}),(0,C.jsxs)(Z.Z,{style:{background:"#000"},visible:L,title:"Invite your friends to join Anonverse",onCancel:function(){return K(!1)},footer:null,children:[function(){if(!a||!a.inviteesInfo)return(0,C.jsx)(g.ZP,{loading:!0});var e=a.inviteesInfo,t=e.reward,n=e.rewardClaimed,s=e.invitees,r=e.rewardsForInviter;if(!s)return(0,C.jsx)(g.ZP.Item,{children:(0,C.jsx)("div",{children:"No Invitees"})});for(var i=[],c=0;c<s.length;c++)i.push((0,C.jsxs)(g.ZP.Item,{children:[(0,C.jsx)(p.Z.Text,{className:"gray w-40",children:(0,C.jsx)(v.Z,{title:s[c],children:(0,F.ro)(s[c])})}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30",children:r[c].div(D.bf.mul(6)).toNumber()}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30",children:(0,C.jsx)(T,{asset:{currency:D.lC,value:r[c]}})})]},c));return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(g.ZP,{children:[(0,C.jsxs)("div",{className:"bn",children:[(0,C.jsx)("span",{className:"gray w-77 mr2 fw8",children:"Total Reward"}),(0,C.jsxs)("span",{className:"text-[#FFDDA8] w-20 fw8",children:[" ",(0,C.jsx)(T,{asset:{currency:D.lC,value:t}})," "]})]}),(0,C.jsxs)("div",{className:"bn",children:[(0,C.jsx)("span",{className:"gray w-77 mr2 fw8",children:"Claimed"}),(0,C.jsxs)("span",{className:"text-[#FFDDA8] w-20 fw8",children:[" ",(0,C.jsx)(T,{asset:{currency:D.lC,value:n}})," "]})]}),(0,C.jsxs)(g.ZP.Item,{children:[(0,C.jsx)("div",{className:"gray w-40 fw8",children:"My Invitees"}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30 fw8",children:"Bought Boxes"}),(0,C.jsx)("div",{className:"text-[#FFDDA8] w-30 fw8",children:"Invite Reward"})]}),i]})})}(),(0,C.jsx)("div",{className:"bb border-yellow-900 mt3 mb3"}),(0,C.jsx)(p.Z.Text,{copyable:{text:"https://darkhero.game/#/hero/box?inviter=".concat(e)},children:(0,C.jsx)(v.Z,{title:"invitation link",children:(0,F.ro)("https://darkhero.game/#/hero/box?inviter=".concat(e),48)})})]}),(0,C.jsxs)(Z.Z,{visible:Q&&te.length>0,maskStyle:{background:"rgba(0,0,0,.95)"},width:800,footer:null,closable:!1,children:[(0,C.jsx)(j.Z,{gutter:24,justify:"center",children:te.map((function(e){return(0,C.jsx)(N.Z,{sm:12,md:12,lg:6,children:(0,C.jsx)("img",{src:(0,F.vg)("nft/NFT-".concat(parseInt(e)%9+1,".png")),alt:"",className:"db center mw-100 mb-5 shadow-3"})},e)}))}),(0,C.jsx)(y.Z,{onClick:function(){U(!1),ne([])},className:"center mw5 tc db shadow-3",block:!0,type:"primary",children:"COLLECT"})]})]})}}}]);